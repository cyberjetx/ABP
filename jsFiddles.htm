<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Joe Fiddles</title>


    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/vader/jquery-ui.css" rel="stylesheet" />

    <script src="//code.jquery.com/jquery-1.10.2.min.js" type="text/javascript"></script>
    <script src="//code.jquery.com/ui/1.10.4/jquery-ui.js" type="text/javascript"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/tabletools/2.2.4/js/dataTables.tableTools.min.js"></script>

    <link href="https://cdn.datatables.net/1.10.7/css/jquery.dataTables.css" rel="stylesheet" />
    <link href="https://cdn.datatables.net/tabletools/2.2.4/css/dataTables.tableTools.css" rel="stylesheet" />

    <script>



Date.prototype.customFormat = function (formatString) {
    var YYYY, YY, MMMM, MMM, MM, M, DDDD, DDD, DD, D, hhh, hh, h, mm, m, ss, s, ampm, AMPM, dMod, th;
    var dateObject = this;
    YY = ((YYYY = dateObject.getFullYear()) + "").slice(-2);
    MM = (M = dateObject.getMonth() + 1) < 10 ? ('0' + M) : M;
    MMM = (MMMM = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"][M - 1]).substring(0, 3);
    DD = (D = dateObject.getDate()) < 10 ? ('0' + D) : D;
    DDD = (DDDD = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"][dateObject.getDay()]).substring(0, 3);
    th = (D >= 10 && D <= 20) ? 'th' : ((dMod = D % 10) == 1) ? 'st' : (dMod == 2) ? 'nd' : (dMod == 3) ? 'rd' : 'th';
    formatString = formatString.replace("#YYYY#", YYYY).replace("#YY#", YY).replace("#MMMM#", MMMM).replace("#MMM#", MMM).replace("#MM#", MM).replace("#M#", M).replace("#DDDD#", DDDD).replace("#DDD#", DDD).replace("#DD#", DD).replace("#D#", D).replace("#th#", th);

    h = (hhh = dateObject.getHours());
    if (h == 0) h = 24;
    if (h > 12) h -= 12;
    hh = h < 10 ? ('0' + h) : h;
    AMPM = (ampm = hhh < 12 ? 'am' : 'pm').toUpperCase();
    mm = (m = dateObject.getMinutes()) < 10 ? ('0' + m) : m;
    ss = (s = dateObject.getSeconds()) < 10 ? ('0' + s) : s;
    return formatString.replace("#hhh#", hhh).replace("#hh#", hh).replace("#h#", h).replace("#mm#", mm).replace("#m#", m).replace("#ss#", ss).replace("#s#", s).replace("#ampm#", ampm).replace("#AMPM#", AMPM);
}

function dtMe() {
    $('#myFiddles').DataTable({
        "sDom": 'T<"clear">lfrtip'
        , "order": [[2, "desc"]]
        , "sPaginationType": "full_numbers"
        , "aLengthMenu": [[10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]]
        , "iDisplayLength": -1
        , "oTableTools": {
            "aButtons": [
                "pdf",
                "copy",
                "print", {
                    "sExtends": "collection",
                    "sButtonText": "Save",
                    "aButtons": ["csv", "xls", "pdf"]
                }]
        }
    });
}

function GetFiddles(start, limit, end) {
        //var user = "https://jsfiddle.net/user/get_username/";
    var url = 'https://jsfiddle.net/api/user/Cyberjetx/demo/list.json?callback=?&start=' + start + '&limit=' + limit; //&sort=created
    console.log("url: " + url);

    $.getJSON(url, function (data) {
        var box = $('#myFiddlesBod');
        var list = data.list;
        var title, description, created, framework, url, version;

        var item;
        var output = "";

        for (i = 0; i < list.length; i++) {
            item = list[i];
            created = item.created;
            description = item.description;
            framework = item.framework;
            version = item.latest_version;
            title = item.title;
            url = item.url;

            var fmtdDate = new Date(created.substring(0, 10)).customFormat("#MM#/#DD#/#YYYY#");

            output += "<tr class='entry'>";
            output += "<td><a target='_blank' href='" + url + version + "/'><span class='link'>" + title + "</span></a></td>";
            output += "<td>" + version + "</td>";
            output += "<td>" + fmtdDate + "</td>";
            output += "<td>" + framework + "</td>";
            output += "<td>" + description + "</td>";
            output += "</tr>";
        }

        box.append(output);

        var currentFiddle = start + limit;
        if (data.overallResultSetCount > currentFiddle) {

            if (currentFiddle + 100 > data.overallResultSetCount) {
                GetFiddles(currentFiddle, 100, true);
            } else {
                GetFiddles(currentFiddle, 100);    
            }
        }

        if (end === true) {
            dtMe();    
        }
        
    });


}

function GetCount() {

    var url = "https://jsfiddle.net/api/user/Cyberjetx/demo/list.json?callback=?&start=0&limit=1000";
    var retVal = 0;

    $.getJSON(url, function (data) {
        retVal = data.overallResultSetCount;
    });
    return retVal;
}



$(document).ready(function () {

    GetFiddles(0, 100);

});



    </script>

    <style type="text/css">
        body {
            font-family: 'Lucida Grande', 'Lucida Sans', 'Lucida Sans Unicode', 'Myriad', Tahoma, Verdana, Arial;
            font-size: .8em;
            color: #4D5860;
        }

        th {
            background-color: #efefef
        }

        .odd {
            background-color: #EAF6F9!important;
        }

        h1 {
            margin: 0 0 15px;
            font-size: 1.2em;
        }

        a {
            color: #478CDE;
            text-decoration: none;
            font-weight: bold;
        }

        span {
            font-size: .8em;
            color: #7F7F7F;
        }

        ul {
        }

        li {
            margin: 0 0 5px;
            padding: 0 0 5px;
            border-bottom: solid 1px #FEFEFE;
        }

        p {
            font-size: .9em;
            color: #7F7F7F;
            padding: 5px 0 0;
        }
    </style>

</head>
<body>
<!-- Your fiddle needs a title for the API to list it -->

    <div class='wrapper'>
        <b>My Fiddles</b>

        <!-- myFiddles - DataTable ready table -->
        <table id="myFiddles" class="fid dataTable" cellspacing="0" border="1">
            <thead id="myFiddlesHdr">
                <tr>
                    <th>title</th>
                    <th>Version</th>
                    <th>created</th>
                    <th>framework</th>
                    <th>description</th>
                </tr>
            </thead>
            <tbody id="myFiddlesBod"></tbody>
            <tfoot id="myFiddlesFtr" style="display:none;"></tfoot>
        </table>




    </div><br/><hr/><br/>
    
</body>
</html>
